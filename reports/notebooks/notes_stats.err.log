Traceback (most recent call last):
  File "/home/runner/.local/lib/python3.10/site-packages/jupyter_cache/executors/utils.py", line 58, in single_nb_execution
    executenb(
  File "/home/runner/.local/lib/python3.10/site-packages/nbclient/client.py", line 1204, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
  File "/home/runner/.local/lib/python3.10/site-packages/nbclient/util.py", line 84, in wrapped
    return just_run(coro(*args, **kwargs))
  File "/home/runner/.local/lib/python3.10/site-packages/nbclient/util.py", line 62, in just_run
    return loop.run_until_complete(coro)
  File "/usr/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/home/runner/.local/lib/python3.10/site-packages/nbclient/client.py", line 663, in async_execute
    await self.async_execute_cell(
  File "/home/runner/.local/lib/python3.10/site-packages/nbclient/client.py", line 965, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "/home/runner/.local/lib/python3.10/site-packages/nbclient/client.py", line 862, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
fig = px.scatter(scatter_data, x='tpc', y='duration_qb', color='corpus_name', 
                 labels=dict(
                     duration_qb='duration',
                     tpc='named pitch class',
                 ),
                 category_orders=dict(dataset=chronological_corpus_names),
                 color_discrete_map=corpus_name_colors,
                 facet_col='corpus_name', facet_col_wrap=3, facet_col_spacing=0.03,
                 width=1000, height=1000,
                )
fig.update_traces(mode='lines+markers')
fig.for_each_annotation(lambda a: a.update(text=a.text.split("=")[-1]))
fig.update_layout(**STD_LAYOUT, showlegend=False)
fig.update_xaxes(gridcolor='lightgrey', zerolinecolor='lightgrey', tickmode='array', tickvals= [-12, -6, 0, 6, 12, 18],
    ticktext = ["Dbb", "Gb", "C", "F#", "B#", "E##"], visible=True, )
fig.update_yaxes(gridcolor='lightgrey', zeroline=False, matches=None, showticklabels=True)
fig.show()
------------------

[0;31m---------------------------------------------------------------------------[0m
[0;31mValueError[0m                                Traceback (most recent call last)
Cell [0;32mIn[18], line 1[0m
[0;32m----> 1[0m fig [38;5;241m=[39m [43mpx[49m[38;5;241;43m.[39;49m[43mscatter[49m[43m([49m[43mscatter_data[49m[43m,[49m[43m [49m[43mx[49m[38;5;241;43m=[39;49m[38;5;124;43m'[39;49m[38;5;124;43mtpc[39;49m[38;5;124;43m'[39;49m[43m,[49m[43m [49m[43my[49m[38;5;241;43m=[39;49m[38;5;124;43m'[39;49m[38;5;124;43mduration_qb[39;49m[38;5;124;43m'[39;49m[43m,[49m[43m [49m[43mcolor[49m[38;5;241;43m=[39;49m[38;5;124;43m'[39;49m[38;5;124;43mcorpus_name[39;49m[38;5;124;43m'[39;49m[43m,[49m[43m [49m
[1;32m      2[0m [43m                 [49m[43mlabels[49m[38;5;241;43m=[39;49m[38;5;28;43mdict[39;49m[43m([49m
[1;32m      3[0m [43m                     [49m[43mduration_qb[49m[38;5;241;43m=[39;49m[38;5;124;43m'[39;49m[38;5;124;43mduration[39;49m[38;5;124;43m'[39;49m[43m,[49m
[1;32m      4[0m [43m                     [49m[43mtpc[49m[38;5;241;43m=[39;49m[38;5;124;43m'[39;49m[38;5;124;43mnamed pitch class[39;49m[38;5;124;43m'[39;49m[43m,[49m
[1;32m      5[0m [43m                 [49m[43m)[49m[43m,[49m
[1;32m      6[0m [43m                 [49m[43mcategory_orders[49m[38;5;241;43m=[39;49m[38;5;28;43mdict[39;49m[43m([49m[43mdataset[49m[38;5;241;43m=[39;49m[43mchronological_corpus_names[49m[43m)[49m[43m,[49m
[1;32m      7[0m [43m                 [49m[43mcolor_discrete_map[49m[38;5;241;43m=[39;49m[43mcorpus_name_colors[49m[43m,[49m
[1;32m      8[0m [43m                 [49m[43mfacet_col[49m[38;5;241;43m=[39;49m[38;5;124;43m'[39;49m[38;5;124;43mcorpus_name[39;49m[38;5;124;43m'[39;49m[43m,[49m[43m [49m[43mfacet_col_wrap[49m[38;5;241;43m=[39;49m[38;5;241;43m3[39;49m[43m,[49m[43m [49m[43mfacet_col_spacing[49m[38;5;241;43m=[39;49m[38;5;241;43m0.03[39;49m[43m,[49m
[1;32m      9[0m [43m                 [49m[43mwidth[49m[38;5;241;43m=[39;49m[38;5;241;43m1000[39;49m[43m,[49m[43m [49m[43mheight[49m[38;5;241;43m=[39;49m[38;5;241;43m1000[39;49m[43m,[49m
[1;32m     10[0m [43m                [49m[43m)[49m
[1;32m     11[0m fig[38;5;241m.[39mupdate_traces(mode[38;5;241m=[39m[38;5;124m'[39m[38;5;124mlines+markers[39m[38;5;124m'[39m)
[1;32m     12[0m fig[38;5;241m.[39mfor_each_annotation([38;5;28;01mlambda[39;00m a: a[38;5;241m.[39mupdate(text[38;5;241m=[39ma[38;5;241m.[39mtext[38;5;241m.[39msplit([38;5;124m"[39m[38;5;124m=[39m[38;5;124m"[39m)[[38;5;241m-[39m[38;5;241m1[39m]))

File [0;32m~/.local/lib/python3.10/site-packages/plotly/express/_chart_types.py:66[0m, in [0;36mscatter[0;34m(data_frame, x, y, color, symbol, size, hover_name, hover_data, custom_data, text, facet_row, facet_col, facet_col_wrap, facet_row_spacing, facet_col_spacing, error_x, error_x_minus, error_y, error_y_minus, animation_frame, animation_group, category_orders, labels, orientation, color_discrete_sequence, color_discrete_map, color_continuous_scale, range_color, color_continuous_midpoint, symbol_sequence, symbol_map, opacity, size_max, marginal_x, marginal_y, trendline, trendline_options, trendline_color_override, trendline_scope, log_x, log_y, range_x, range_y, render_mode, title, template, width, height)[0m
[1;32m     12[0m [38;5;28;01mdef[39;00m [38;5;21mscatter[39m(
[1;32m     13[0m     data_frame[38;5;241m=[39m[38;5;28;01mNone[39;00m,
[1;32m     14[0m     x[38;5;241m=[39m[38;5;28;01mNone[39;00m,
[0;32m   (...)[0m
[1;32m     60[0m     height[38;5;241m=[39m[38;5;28;01mNone[39;00m,
[1;32m     61[0m ) [38;5;241m-[39m[38;5;241m>[39m go[38;5;241m.[39mFigure:
[1;32m     62[0m [38;5;250m    [39m[38;5;124;03m"""[39;00m
[1;32m     63[0m [38;5;124;03m    In a scatter plot, each row of `data_frame` is represented by a symbol[39;00m
[1;32m     64[0m [38;5;124;03m    mark in 2D space.[39;00m
[1;32m     65[0m [38;5;124;03m    """[39;00m
[0;32m---> 66[0m     [38;5;28;01mreturn[39;00m [43mmake_figure[49m[43m([49m[43margs[49m[38;5;241;43m=[39;49m[38;5;28;43mlocals[39;49m[43m([49m[43m)[49m[43m,[49m[43m [49m[43mconstructor[49m[38;5;241;43m=[39;49m[43mgo[49m[38;5;241;43m.[39;49m[43mScatter[49m[43m)[49m

File [0;32m~/.local/lib/python3.10/site-packages/plotly/express/_core.py:2227[0m, in [0;36mmake_figure[0;34m(args, constructor, trace_patch, layout_patch)[0m
[1;32m   2224[0m [38;5;28;01mif[39;00m args[38;5;241m.[39mget([38;5;124m"[39m[38;5;124mmarginal_y[39m[38;5;124m"[39m) [38;5;129;01mis[39;00m [38;5;129;01mnot[39;00m [38;5;28;01mNone[39;00m:
[1;32m   2225[0m     ncols [38;5;241m+[39m[38;5;241m=[39m [38;5;241m1[39m
[0;32m-> 2227[0m fig [38;5;241m=[39m [43minit_figure[49m[43m([49m
[1;32m   2228[0m [43m    [49m[43margs[49m[43m,[49m[43m [49m[43msubplot_type[49m[43m,[49m[43m [49m[43mframe_list[49m[43m,[49m[43m [49m[43mnrows[49m[43m,[49m[43m [49m[43mncols[49m[43m,[49m[43m [49m[43mcol_labels[49m[43m,[49m[43m [49m[43mrow_labels[49m
[1;32m   2229[0m [43m[49m[43m)[49m
[1;32m   2231[0m [38;5;66;03m# Position traces in subplots[39;00m
[1;32m   2232[0m [38;5;28;01mfor[39;00m frame [38;5;129;01min[39;00m frame_list:

File [0;32m~/.local/lib/python3.10/site-packages/plotly/express/_core.py:2371[0m, in [0;36minit_figure[0;34m(args, subplot_type, frame_list, nrows, ncols, col_labels, row_labels)[0m
[1;32m   2369[0m [38;5;28;01mexcept[39;00m [38;5;167;01mValueError[39;00m [38;5;28;01mas[39;00m e:
[1;32m   2370[0m     _spacing_error_translator(e, [38;5;124m"[39m[38;5;124mHorizontal[39m[38;5;124m"[39m, [38;5;124m"[39m[38;5;124mfacet_col_spacing[39m[38;5;124m"[39m)
[0;32m-> 2371[0m     [43m_spacing_error_translator[49m[43m([49m[43me[49m[43m,[49m[43m [49m[38;5;124;43m"[39;49m[38;5;124;43mVertical[39;49m[38;5;124;43m"[39;49m[43m,[49m[43m [49m[38;5;124;43m"[39;49m[38;5;124;43mfacet_row_spacing[39;49m[38;5;124;43m"[39;49m[43m)[49m
[1;32m   2373[0m [38;5;66;03m# Remove explicit font size of row/col titles so template can take over[39;00m
[1;32m   2374[0m [38;5;28;01mfor[39;00m annot [38;5;129;01min[39;00m fig[38;5;241m.[39mlayout[38;5;241m.[39mannotations:

File [0;32m~/.local/lib/python3.10/site-packages/plotly/express/_core.py:2350[0m, in [0;36minit_figure.<locals>._spacing_error_translator[0;34m(e, direction, facet_arg)[0m
[1;32m   2342[0m [38;5;28;01mif[39;00m ([38;5;124m"[39m[38;5;132;01m%s[39;00m[38;5;124m spacing[39m[38;5;124m"[39m [38;5;241m%[39m (direction,)) [38;5;129;01min[39;00m e[38;5;241m.[39margs[[38;5;241m0[39m]:
[1;32m   2343[0m     e[38;5;241m.[39margs [38;5;241m=[39m (
[1;32m   2344[0m         e[38;5;241m.[39margs[[38;5;241m0[39m]
[1;32m   2345[0m         [38;5;241m+[39m [38;5;124m"""[39m
[0;32m   (...)[0m
[1;32m   2348[0m         ),
[1;32m   2349[0m     )
[0;32m-> 2350[0m     [38;5;28;01mraise[39;00m e

File [0;32m~/.local/lib/python3.10/site-packages/plotly/express/_core.py:2354[0m, in [0;36minit_figure[0;34m(args, subplot_type, frame_list, nrows, ncols, col_labels, row_labels)[0m
[1;32m   2352[0m [38;5;66;03m# Create figure with subplots[39;00m
[1;32m   2353[0m [38;5;28;01mtry[39;00m:
[0;32m-> 2354[0m     fig [38;5;241m=[39m [43mmake_subplots[49m[43m([49m
[1;32m   2355[0m [43m        [49m[43mrows[49m[38;5;241;43m=[39;49m[43mnrows[49m[43m,[49m
[1;32m   2356[0m [43m        [49m[43mcols[49m[38;5;241;43m=[39;49m[43mncols[49m[43m,[49m
[1;32m   2357[0m [43m        [49m[43mspecs[49m[38;5;241;43m=[39;49m[43mspecs[49m[43m,[49m
[1;32m   2358[0m [43m        [49m[43mshared_xaxes[49m[38;5;241;43m=[39;49m[38;5;124;43m"[39;49m[38;5;124;43mall[39;49m[38;5;124;43m"[39;49m[43m,[49m
[1;32m   2359[0m [43m        [49m[43mshared_yaxes[49m[38;5;241;43m=[39;49m[38;5;124;43m"[39;49m[38;5;124;43mall[39;49m[38;5;124;43m"[39;49m[43m,[49m
[1;32m   2360[0m [43m        [49m[43mrow_titles[49m[38;5;241;43m=[39;49m[43m[[49m[43m][49m[43m [49m[38;5;28;43;01mif[39;49;00m[43m [49m[43mfacet_col_wrap[49m[43m [49m[38;5;28;43;01melse[39;49;00m[43m [49m[38;5;28;43mlist[39;49m[43m([49m[38;5;28;43mreversed[39;49m[43m([49m[43mrow_labels[49m[43m)[49m[43m)[49m[43m,[49m
[1;32m   2361[0m [43m        [49m[43mcolumn_titles[49m[38;5;241;43m=[39;49m[43m[[49m[43m][49m[43m [49m[38;5;28;43;01mif[39;49;00m[43m [49m[43mfacet_col_wrap[49m[43m [49m[38;5;28;43;01melse[39;49;00m[43m [49m[43mcol_labels[49m[43m,[49m
[1;32m   2362[0m [43m        [49m[43msubplot_titles[49m[38;5;241;43m=[39;49m[43msubplot_labels[49m[43m [49m[38;5;28;43;01mif[39;49;00m[43m [49m[43mfacet_col_wrap[49m[43m [49m[38;5;28;43;01melse[39;49;00m[43m [49m[43m[[49m[43m][49m[43m,[49m
[1;32m   2363[0m [43m        [49m[43mhorizontal_spacing[49m[38;5;241;43m=[39;49m[43mhorizontal_spacing[49m[43m,[49m
[1;32m   2364[0m [43m        [49m[43mvertical_spacing[49m[38;5;241;43m=[39;49m[43mvertical_spacing[49m[43m,[49m
[1;32m   2365[0m [43m        [49m[43mrow_heights[49m[38;5;241;43m=[39;49m[43mrow_heights[49m[43m,[49m
[1;32m   2366[0m [43m        [49m[43mcolumn_widths[49m[38;5;241;43m=[39;49m[43mcolumn_widths[49m[43m,[49m
[1;32m   2367[0m [43m        [49m[43mstart_cell[49m[38;5;241;43m=[39;49m[38;5;124;43m"[39;49m[38;5;124;43mbottom-left[39;49m[38;5;124;43m"[39;49m[43m,[49m
[1;32m   2368[0m [43m    [49m[43m)[49m
[1;32m   2369[0m [38;5;28;01mexcept[39;00m [38;5;167;01mValueError[39;00m [38;5;28;01mas[39;00m e:
[1;32m   2370[0m     _spacing_error_translator(e, [38;5;124m"[39m[38;5;124mHorizontal[39m[38;5;124m"[39m, [38;5;124m"[39m[38;5;124mfacet_col_spacing[39m[38;5;124m"[39m)

File [0;32m~/.local/lib/python3.10/site-packages/plotly/_subplots.py:567[0m, in [0;36mmake_subplots[0;34m(rows, cols, shared_xaxes, shared_yaxes, start_cell, print_grid, horizontal_spacing, vertical_spacing, subplot_titles, column_widths, row_heights, specs, insets, column_titles, row_titles, x_title, y_title, figure, **kwargs)[0m
[1;32m    565[0m         vertical_spacing [38;5;241m=[39m [38;5;241m0.3[39m [38;5;241m/[39m rows
[1;32m    566[0m [38;5;66;03m# check vertical_spacing can be satisfied:[39;00m
[0;32m--> 567[0m [43m_check_hv_spacing[49m[43m([49m[43mrows[49m[43m,[49m[43m [49m[43mvertical_spacing[49m[43m,[49m[43m [49m[38;5;124;43m"[39;49m[38;5;124;43mVertical[39;49m[38;5;124;43m"[39;49m[43m,[49m[43m [49m[38;5;124;43m"[39;49m[38;5;124;43mrows[39;49m[38;5;124;43m"[39;49m[43m,[49m[43m [49m[38;5;124;43m"[39;49m[38;5;124;43mrows[39;49m[38;5;124;43m"[39;49m[43m)[49m
[1;32m    569[0m [38;5;66;03m# ### subplot titles ###[39;00m
[1;32m    570[0m [38;5;28;01mif[39;00m subplot_titles [38;5;129;01mis[39;00m [38;5;28;01mNone[39;00m:

File [0;32m~/.local/lib/python3.10/site-packages/plotly/_subplots.py:540[0m, in [0;36mmake_subplots.<locals>._check_hv_spacing[0;34m(dimsize, spacing, name, dimvarname, dimname)[0m
[1;32m    538[0m         max_spacing [38;5;241m=[39m [38;5;241m1.0[39m [38;5;241m/[39m [38;5;28mfloat[39m(dimsize [38;5;241m-[39m [38;5;241m1[39m)
[1;32m    539[0m         [38;5;28;01mif[39;00m spacing [38;5;241m>[39m max_spacing:
[0;32m--> 540[0m             [38;5;28;01mraise[39;00m [38;5;167;01mValueError[39;00m(
[1;32m    541[0m [38;5;250m                [39m[38;5;124;03m"""{name} spacing cannot be greater than (1 / ({dimvarname} - 1)) = {max_spacing:f}.[39;00m
[1;32m    542[0m [38;5;124;03mThe resulting plot would have {dimsize} {dimname} ({dimvarname}={dimsize})."""[39;00m[38;5;241m.[39mformat(
[1;32m    543[0m                     dimvarname[38;5;241m=[39mdimvarname,
[1;32m    544[0m                     name[38;5;241m=[39mname,
[1;32m    545[0m                     dimname[38;5;241m=[39mdimname,
[1;32m    546[0m                     max_spacing[38;5;241m=[39mmax_spacing,
[1;32m    547[0m                     dimsize[38;5;241m=[39mdimsize,
[1;32m    548[0m                 )
[1;32m    549[0m             )

[0;31mValueError[0m: Vertical spacing cannot be greater than (1 / (rows - 1)) = 0.062500.
The resulting plot would have 17 rows (rows=17).
Use the facet_row_spacing argument to adjust this spacing.
ValueError: Vertical spacing cannot be greater than (1 / (rows - 1)) = 0.062500.
The resulting plot would have 17 rows (rows=17).
Use the facet_row_spacing argument to adjust this spacing.

